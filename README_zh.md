# wovenet

连接不同的私有局域网， 构建 site-to-site 网络。提升网络带宽，增强网络稳定性，安全性

![wovenet topology](./wovenet.png)

从直觉上看这个项目是一个 IPSec VPN 的实现。总体来说他们有着类似的功能，但是又有许多不同的地方：

* IPSec VPN 是一个以太网 VPN，隧道内传输的是以太网报文。`wovenet` 实现的是应用层 VPN，隧道内传输的是应用层数据。

  `wovenet` 有两个优势：
  * `wovenet` 隧道内直接传输应用层数据，没有封装额外的包头，带宽利用率更高； 
  * `wovenet` 可以控制本站点内哪些 app 可以被其他站点访问。IPSec VPN 就做不到这一点，只要两个站点建立了 IPSec VPN 隧道，它们能互相访问对方内网的所有主机的所有服务。

* IPSec VPN 要求每个站点都要有一个固定公网 IP，而 `wovenet` 则不需要。

  当前版本的 `wovenet` 只需要部分站点有固定公网 IP，如上图展示的的拓扑中，只需任意两个站点有固定公网 IP。当只需要两个站点互联时，只需要任意一个站点有固定的公网 IP。

  后续会增加`动态公网 IP 检测`和 `NAT 打洞`功能。
  * `动态公网 IP 检测` 用于应当因为某种原因（如：1、人为改变（公有云中的浮动IP/弹性IP）; dhcp 租约到期（家庭宽带光猫上的公网 IP 就会经常变动））公网 IP 改变的情况。
  * `NAT 打洞` 用于应对各个站点无法控制 NAT 网关上的公网 IP 配置（无法在 NAT 网关上做公网和内网的端口映射）。

* `wovenet` 支持 IPv4 和 IPv6 双栈同时工作，不仅可以为隧道提供冗余链路，还可以在链路直接做负载均衡，增大隧道带宽。

## 用户示例

* [IPv4 与 IPv6 双栈配置，增强网络稳定性，减少费用](./examples/v4-v6-dual-stack/README_zh.md)
* [借助 wovenet 实现内网穿透](./examples/reverse-proxy/README_zh.md)

在使用过程中有不懂的配置项，请查阅[config.yaml](./config.yaml)

## 功能规划

* 实现隧道中断后自动重连机制
* 增加动态获取公网 IP 的功能，防止因 IP 改变导致隧道无法重新建连
* 支持在客户端可以自由配置访问远端站点的哪些 APP
* 增加 restful 接口，支持动态配置 app
* 增加一套 web ui，降低配置复杂度
* 实现通过打洞的方式建立隧道，摆脱对公网 IP 的依赖
* 增加流量监控功能
* 实现通过 sctp 协议建立隧道，进而增加对 TCP 协议的支持（QUIC 是基于 UDP 的）


